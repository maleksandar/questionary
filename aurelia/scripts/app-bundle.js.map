{"version":3,"sources":["app.js","environment.js","main.js","dialogs/login.js","dialogs/signup.js","pages/about.js","pages/admin.js","pages/home.js","pages/question-details.js","pages/questions.js","resources/index.js","services/auth.js","resources/elements/answer.js","resources/elements/confirmation-dialog.js","resources/elements/edit-dialog.js","resources/elements/question-filter.js","resources/elements/question-form.js","resources/elements/question-list.js","resources/elements/question.js","resources/value-converters/dates.js"],"names":["App","auth","dialogService","configureRouter","config","router","title","map","route","moduleId","nav","name","loginModal","open","viewModel","signupModal","isLogedIn","currentUser","role","debug","testing","configure","Promise","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","plugin","developmentLogging","configureContainer","container","start","then","setRoot","http","useStandardConfiguration","withBaseUrl","withDefaults","credentials","headers","withInterceptor","request","console","log","method","url","response","status","registerInstance","Login","httpClient","dialogController","login","email","password","close","catch","loginError","fetch","json","Signup","signup","body","navigate","reason","signupError","About","Admin","domains","users","attached","canActivate","addDomain","text","domain","deleteDomain","dom","model","headline","message","wasCancelled","deleteUser","u","_id","Home","sideForm","showFilter","showForm","QuestionDetails","ea","activate","params","routeConfig","questionPromise","id","questionDetail","questionContent","question","navModel","setTitle","answerPromise","answers","all","subscriber","subscribe","detached","dispose","Questions","globalResources","Auth","sessionStorage","getItem","userId","userinfo","setItem","user_role","user_id","logout","toastr","Answer","delete","content","success","deleted","voteUp","voteResp","vote","positiveVotes","voteDown","negativeVotes","parseInt","createdByUserId","ConfirmationDialog","EditDialog","retObj","tag","questionHeadline","questionText","tags","questionTags","questionDomain","removeTag","tagText","index","indexOf","splice","addTag","push","QuestionFilter","filter","publish","dateFrom","dateTo","QuestionForm","postQuestion","tagObjects","Tags","DomainText","serverError","QuestionList","pageIndexes","questions","questionsIsNotEmpty","paginationLower","paginationGreater","filterSubscriber","setRequestBase","length","forEach","getQuestions","questionAddedSubscriber","questionDeletedSubscriber","source","responseObj","count","setParams","currentIndex","valueChanged","newValue","oldValue","setPage","getPages","slice","rows","Array","from","Math","floor","x","i","Question","userEmail","pinned","user","quickAnswer","answerText","QuestionId","Answers","edit","TagQuestions","TagText","dialogResponse","output","resObj","updated","pin","DateFormatValueConverter","toView","value","calendar"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import { Auth } from './services/auth';\r\nimport { inject, computedFrom } from 'aurelia-framework';\r\nimport { DialogService } from 'aurelia-dialog';\r\nimport { Login } from './dialogs/login';\r\nimport { Signup } from './dialogs/signup';\r\n\r\n\r\n@inject(Auth, DialogService)\r\nexport class App {\r\n  constructor(auth, dialogService) {\r\n    this.auth = auth;\r\n    this.dialogService = dialogService;\r\n  }\r\n\r\n  configureRouter(config, router){\r\n    config.title = 'Questionary';\r\n    config.map([\r\n      { route: '',       moduleId: 'pages/questions', title: 'Questions' },\r\n      { route: 'home',   moduleId: 'pages/home',      title: 'Home', nav: false },\r\n      { route: 'admin',   moduleId: 'pages/admin',      title: 'Admin', nav: false },\r\n      { route: 'about',   moduleId: 'pages/about',      title: 'About' },\r\n      { route: 'question/:id', moduleId: 'pages/question-details', name: 'question-details', title: 'Question' },\r\n    ]);\r\n    this.router = router;\r\n  }\r\n\r\n  loginModal() {\r\n    this.dialogService.open({ viewModel: Login });\r\n  }\r\n\r\n  signupModal() {\r\n    this.dialogService.open({ viewModel: Signup });\r\n  }\r\n\r\n  @computedFrom('auth.isLogedIn')\r\n  get authenticated() {\r\n    return this.auth.isLogedIn;\r\n  }\r\n\r\n  @computedFrom('auth.currentUser.role')\r\n  get isAdmin() {\r\n    return this.auth.currentUser.role === 'admin';\r\n  }\r\n}\r\n","export default {\r\n  debug: true,\r\n  testing: true\r\n};\r\n","import environment from './environment';\r\nimport {HttpClient} from 'aurelia-fetch-client';\r\n\r\n//Configure Bluebird Promises.\r\nPromise.config({\r\n  longStackTraces: environment.debug,\r\n  warnings: {\r\n    wForgottenReturn: false\r\n  }\r\n});\r\n\r\nexport function configure(aurelia) {\r\n  aurelia.use\r\n    .standardConfiguration()\r\n    .feature('resources')\r\n    .plugin('aurelia-dialog');\r\n\r\n  if (environment.debug) {\r\n    aurelia.use\r\n      .developmentLogging();\r\n  }\r\n\r\n  if (environment.testing) {\r\n    aurelia.use.plugin('aurelia-testing');\r\n  }\r\n\r\n  configureContainer(aurelia.container);\r\n\r\n  aurelia.start().then(() => aurelia.setRoot());\r\n}\r\n\r\nfunction configureContainer(container) {\r\n  let http = new HttpClient();\r\n  http.configure(config => {\r\n    config\r\n      .useStandardConfiguration()\r\n      .withBaseUrl('api/')\r\n      .withDefaults({\r\n        credentials: 'same-origin',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'X-Requested-With': 'Fetch'\r\n        }\r\n      });\r\n      if (environment.debug) {\r\n        config.withInterceptor({\r\n          request(request) {\r\n            console.log(`Requesting ${request.method} ${request.url}`);\r\n            return request;\r\n          },\r\n          response(response) {\r\n            console.log(`Received ${response.status} ${response.url}`);\r\n            return response;\r\n          }\r\n        });\r\n    }\r\n  });\r\n  container.registerInstance(HttpClient, http); // DI setup.\r\n}","import { inject } from 'aurelia-framework';\r\nimport { Router } from 'aurelia-router';\r\nimport { HttpClient } from 'aurelia-fetch-client';\r\nimport { Auth } from '../services/auth';\r\nimport { DialogController } from 'aurelia-dialog';\r\n\r\n@inject(Auth, Router, HttpClient, DialogController)\r\nexport class Login {\r\n  constructor(auth, router, httpClient, dialogController) {\r\n    this.auth = auth;\r\n    this.router = router;\r\n    this.httpClient = httpClient;\r\n    this.dialogController = dialogController;\r\n  }\r\n\r\n  login() {\r\n    this.auth.login(this.email, this.password)\r\n      .then(() => {\r\n        this.dialogController.close();\r\n        // this.router.navigate(\"\");\r\n      })\r\n      .catch(() => this.loginError = true)\r\n      .then(() => {\r\n        if(!this.loginError) {\r\n          this.httpClient.fetch('users/me')\r\n            .then(response => response.json());\r\n        }\r\n      });\r\n  }\r\n}","import { bindable, inject } from 'aurelia-framework';\r\nimport { HttpClient, json } from 'aurelia-fetch-client';\r\nimport { Router } from 'aurelia-router';\r\nimport { DialogController } from 'aurelia-dialog';\r\n\r\n\r\n@inject(HttpClient, Router, DialogController)\r\nexport class Signup {\r\n  constructor(httpClient, router, dialogController) {\r\n    this.httpClient = httpClient;\r\n    this.router = router;\r\n    this.dialogController = dialogController;\r\n  }\r\n\r\n  signup() {\r\n    this.httpClient.fetch('users', {\r\n      method: 'post',\r\n      body: json({ name: this.name, email: this.email, password: this.password })\r\n    }).then(() => {\r\n      this.dialogController.close();\r\n      this.router.navigate(\"\");\r\n    }).catch(reason => reason.json()\r\n    .then(reason => {\r\n      console.log(reason);\r\n      if(reason.name === \"SequelizeUniqueConstraintError\") {\r\n        this.signupError = `'${this.email}' aready exists.`;\r\n      }\r\n    })); \r\n  }\r\n}","export class About {\r\n  \r\n}","import { Auth } from '../services/auth';\r\nimport { inject, computedFrom } from 'aurelia-framework';\r\nimport { HttpClient, json } from 'aurelia-fetch-client';\r\nimport { DialogService } from 'aurelia-dialog';\r\nimport { ConfirmationDialog } from '../resources/elements/confirmation-dialog';\r\n\r\n@inject(Auth, HttpClient, DialogService)\r\nexport class Admin {\r\n  constructor(auth, httpClient, dialogService) {\r\n    this.auth = auth;\r\n    this.httpClient = httpClient;\r\n    this.dialogService = dialogService;\r\n    this.domains = [];\r\n    this.users = [];\r\n  }\r\n\r\n  attached() {\r\n    this.httpClient.fetch(`domains`).then(response => response.json()).then(domains => { this.domains = domains; });\r\n    this.httpClient.fetch('users').then(response => response.json()).then(users => { this.users = users; });\r\n  }\r\n\r\n  canActivate() {\r\n    return this.auth.currentUser.role === 'admin';\r\n  }\r\n\r\n  addDomain() {\r\n    this.httpClient.fetch(`domains`, { method: 'post', body: json({ text: this.domain }) })\r\n      .then(() => {\r\n        this.httpClient.fetch(`domains`).then(response => response.json())\r\n        .then(domains => { this.domains = domains; this.domain = \"\"; });\r\n      });\r\n  }\r\n\r\n  deleteDomain(dom) {\r\n    this.dialogService.open({ viewModel: ConfirmationDialog, model: { headline: \"Delete domain\", message: \"Are you sure you want to delete this domain?\" } })\r\n      .then(response => {\r\n        if (!response.wasCancelled) {\r\n          this.httpClient.fetch(`domains/${dom.text}`, { method: 'delete' })\r\n            .then(() => {\r\n              this.httpClient.fetch(`domains`).then(response => response.json()).then(domains => { this.domains = domains; });\r\n            });\r\n        }\r\n      });\r\n  }\r\n\r\n  deleteUser(u) {\r\n    this.dialogService.open({ viewModel: ConfirmationDialog, model: { headline: \"Delete user\", message: \"Are you sure you want to delete this user?\" } })\r\n      .then(response => {\r\n        if (!response.wasCancelled) {\r\n          this.httpClient.fetch(`users/${u._id}`, { method: 'delete' })\r\n            .then(() => {\r\n              this.httpClient.fetch(`users`).then(response => response.json()).then(users => { this.users = users; });\r\n            });\r\n        }\r\n      });\r\n  }\r\n\r\n  @computedFrom('auth.currentUser.role')\r\n  get isAdmin() {\r\n    return this.auth.currentUser.role === 'admin';\r\n  }\r\n}","import {Auth} from '../services/auth';\r\nimport {inject} from 'aurelia-framework';\r\n\r\n@inject(Auth)\r\nexport class Home {\r\n  constructor(auth) {\r\n    this.auth = auth;\r\n    this.sideForm = 'filter';\r\n  }\r\n\r\n  canActivate() {\r\n    return this.auth.isLogedIn;\r\n  }\r\n    showFilter() {\r\n    if(this.sideForm === 'filter') {\r\n      this.sideForm = null\r\n    } else {\r\n      this.sideForm = 'filter';\r\n    }  }\r\n\r\n  showForm() {\r\n    if(this.sideForm === 'form') {\r\n      this.sideForm = null\r\n    } else {\r\n      this.sideForm = 'form';\r\n    }\r\n  }\r\n}","import { inject } from 'aurelia-framework';\r\nimport { HttpClient, json } from 'aurelia-fetch-client';\r\nimport { Router } from 'aurelia-router';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\n\r\n@inject(HttpClient, EventAggregator)\r\nexport class QuestionDetails {\r\n  constructor(httpClient, ea) {\r\n    this.httpClient = httpClient;\r\n    this.ea = ea;\r\n  }\r\n\r\n  activate(params, routeConfig) {\r\n    this.routeConfig = routeConfig;  \r\n\r\n    var questionPromise = this.httpClient.fetch(`questions/${params.id}?include=Tags&include=Answers`)\r\n      .then(questionDetail => questionDetail.json())\r\n      .then(question => { \r\n        this.questionContent = question; \r\n        this.routeConfig.navModel.setTitle(question.headline);\r\n      });\r\n\r\n    var answerPromise = this.httpClient.fetch(`answers/question/${params.id}`)\r\n      .then(response => response.json())\r\n      .then(answers => { \r\n        this.answers = answers; \r\n      });\r\n\r\n    return Promise.all([questionPromise, answerPromise]);\r\n  }\r\n\r\n  attached() {\r\n    this.subscriber = this.ea.subscribe('questionAnswered', message => {\r\n      this.httpClient.fetch(`answers/question/${message.id}`)\r\n        .then(response => response.json())\r\n        .then(answers => { \r\n          this.answers = answers;\r\n                console.log(answers);\r\n        });    \r\n    });\r\n  }\r\n\r\n  detached() {\r\n    this.subscriber.dispose();\r\n  }\r\n}","import { Auth } from '../services/auth';\r\nimport { inject, computedFrom } from 'aurelia-framework';\r\n\r\n@inject(Auth)\r\nexport class Questions {\r\n  constructor(auth) {\r\n    this.auth = auth;\r\n    this.sideForm = 'filter';\r\n  }\r\n\r\n  showFilter() {\r\n    if(this.sideForm === 'filter') {\r\n      this.sideForm = null\r\n    } else {\r\n      this.sideForm = 'filter';\r\n    }  }\r\n\r\n  showForm() {\r\n    if(this.sideForm === 'form') {\r\n      this.sideForm = null\r\n    } else {\r\n      this.sideForm = 'form';\r\n    }\r\n  }\r\n\r\n  @computedFrom('auth.isLogedIn')\r\n  get authenticated() {\r\n    return this.auth.isLogedIn;\r\n  }\r\n}","export function configure(config) {\r\n  config.globalResources(['./elements/question-list',\r\n                          './elements/question-form',\r\n                          './elements/question-filter',\r\n                          './elements/confirmation-dialog']);\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { HttpClient, json } from 'aurelia-fetch-client';\r\nimport { Router } from 'aurelia-router';\r\n\r\n\r\n@inject(HttpClient, Router)\r\nexport class Auth {\r\n  constructor(httpClient, router) {\r\n    this.httpClient = httpClient;\r\n    this.router = router;\r\n    this.isLogedIn = sessionStorage.getItem(\"logedIn\") === \"true\";\r\n    this.currentUser = { userId: sessionStorage.getItem(\"userId\"), role: sessionStorage.getItem(\"role\") }\r\n    console.log('auth constructor', this.currentUser);\r\n  }\r\n\r\n  login(email, password) {\r\n    return this.httpClient.fetch('auth/login', {\r\n      method: 'post',\r\n      body: json({ email: email, password: password })\r\n    })\r\n    .then(response => response.json())\r\n    .then(userinfo => {\r\n      console.log(userinfo);\r\n      // sessionStorage can only save strings not bools.\r\n      sessionStorage.setItem('role', userinfo.user_role)\r\n      this.currentUser.role = userinfo.user_role;\r\n      sessionStorage.setItem('logedIn', \"true\");\r\n      this.isLogedIn = true;\r\n      this.currentUser.userId = userinfo.user_id;\r\n      sessionStorage.setItem('userId', userinfo.user_id);\r\n      return userinfo;\r\n    });\r\n  }\r\n\r\n  logout() {\r\n    sessionStorage.setItem('role', \"\")\r\n    this.currentUser.role = \"\";\r\n    sessionStorage.setItem('logedIn', \"false\");\r\n    this.isLogedIn = false;\r\n    this.currentUser.userId = \"\";\r\n    sessionStorage.setItem('userId', \"\");\r\n    return this.httpClient.fetch('auth/logout', {\r\n      method: 'post'\r\n    }).then(() => {\r\n      this.router.navigate(\"\");\r\n    });\r\n  }\r\n}","import { bindable, inject, computedFrom } from 'aurelia-framework';\r\nimport { HttpClient, json } from 'aurelia-fetch-client';\r\nimport { Auth } from '../../services/auth';\r\nimport { DialogService } from 'aurelia-dialog';\r\nimport { ConfirmationDialog } from './confirmation-dialog';\r\n\r\nvar toastr = require('toastr');\r\n\r\n@inject(HttpClient, toastr, Auth, DialogService)\r\nexport class Answer {\r\n  @bindable content;\r\n\r\n  constructor(httpClient, toastr, auth, dialogService) {\r\n    this.httpClient = httpClient;\r\n    this.toastr = toastr;\r\n    this.auth = auth;\r\n    this.dialogService = dialogService;\r\n  }\r\n\r\n  delete() {\r\n    this.dialogService.open({ viewModel: ConfirmationDialog, model: { headline: \"Delete answer\", message: \"Are you sure you want to delete this answer?\"} })\r\n      .then(response => {\r\n        if(!response.wasCancelled) {\r\n          this.httpClient.fetch(`answers/${this.content._id}`, { method: 'delete' })\r\n            .then(() => {\r\n              this.toastr.success('You have successfully deleted your answer');\r\n              this.deleted = true;\r\n            });\r\n        }\r\n      });\r\n  }\r\n\r\n  voteUp() {\r\n    this.httpClient.fetch(`answers/votes/${this.content._id}/thumbsup`, { method: 'put'})\r\n      .then(response => response.json())\r\n      .then(voteResp => {\r\n        if(voteResp.vote)\r\n          this.content.positiveVotes += 1;\r\n      });\r\n  }\r\n\r\n  voteDown() {\r\n    this.httpClient.fetch(`answers/votes/${this.content._id}/thumbsdown`, { method: 'put'})\r\n      .then(response => response.json())\r\n      .then(voteResp => {\r\n        if(voteResp.vote)\r\n          this.content.negativeVotes += 1;\r\n      });\r\n  }\r\n\r\n  @computedFrom('auth.currentUser.userId', 'content.createdByUserId')\r\n  get authorized() {\r\n    return parseInt(this.auth.currentUser.userId) === parseInt(this.content.createdByUserId);\r\n  }\r\n\r\n  @computedFrom('auth.isLogedIn')\r\n  get authenticated() {\r\n    return this.auth.isLogedIn;\r\n  }\r\n}","import { inject } from 'aurelia-framework';\r\nimport { DialogController } from 'aurelia-dialog';\r\n\r\n@inject(DialogController)\r\nexport class ConfirmationDialog {\r\n  constructor(dialogController) {\r\n    this.dialogController = dialogController;\r\n  }\r\n\r\n  activate(content) {\r\n    this.message = content.message;\r\n    this.headline = content.headline;\r\n  }\r\n}","import { inject } from 'aurelia-framework';\r\nimport { HttpClient, json } from 'aurelia-fetch-client';\r\nimport { DialogController } from 'aurelia-dialog';\r\n\r\n@inject(HttpClient, DialogController)\r\nexport class EditDialog {\r\n    constructor(httpClient, dialogController){\r\n        this.httpClient = httpClient;\r\n        this.dialogController = dialogController;\r\n        this.retObj = { domain: \"\"};\r\n        this.tag = \"\";\r\n        this.httpClient.fetch('domains')\r\n            .then(response => response.json())\r\n            .then(domains => { this.domains = domains; })\r\n            .catch(reason => { console.log(reason); });\r\n\r\n    }\r\n\r\n    activate(content) {\r\n        this.headline = content.headline;\r\n        this.retObj.headline = content.questionHeadline;\r\n        this.retObj.text = content.questionText;\r\n        this.retObj.tags = content.questionTags;\r\n        this.retObj.domain = content.questionDomain;\r\n    }\r\n\r\n    removeTag(tagText) {\r\n        var index = this.retObj.tags.indexOf(tagText);\r\n        if (index > -1) {\r\n            this.retObj.tags.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    addTag() {\r\n        if(this.tag) {\r\n            this.retObj.tags.push(this.tag);\r\n            this.tag = \"\";\r\n        }\r\n    }\r\n\r\n}","import { bindable, inject, computedFrom } from 'aurelia-framework';\r\nimport { HttpClient, json } from 'aurelia-fetch-client';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\n\r\n@inject(HttpClient, EventAggregator)\r\nexport class QuestionFilter {\r\n  constructor(httpClient, ea) {\r\n    this.httpClient = httpClient;\r\n    this.ea = ea;\r\n    this.tags = [];\r\n    this.httpClient.fetch('domains')\r\n      .then(response => response.json())\r\n      .then(domains => { this.domains = domains; })\r\n      .catch(reason => { console.log(reason); });\r\n  }\r\n\r\n  filter() {\r\n    console.log(this.tags);\r\n    this.ea.publish('questionsFiltered', { \r\n      questionText: this.questionText,\r\n      tags: this.tags,\r\n      domain: this.domain.text,\r\n      dateFrom: this.dateFrom,\r\n      dateTo: this.dateTo\r\n    });\r\n  }\r\n\r\n  addTag() {\r\n    if(this.tag) {\r\n      this.tags.push(this.tag);\r\n      this.tag = \"\";\r\n    }\r\n  }\r\n\r\n  removeTag(tagText) {\r\n    var index = this.tags.indexOf(tagText);\r\n    if (index > -1) {\r\n        this.tags.splice(index, 1);\r\n    }\r\n  }\r\n}","import { HttpClient, json } from 'aurelia-fetch-client';\r\nimport { inject } from 'aurelia-framework';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\nvar toastr = require('toastr');\r\n\r\n\r\n@inject(HttpClient, toastr, EventAggregator)\r\nexport class QuestionForm {\r\n  constructor(httpClient, toastr, ea) {\r\n    this.httpClient = httpClient;\r\n    this.toastr = toastr;\r\n    this.ea = ea;\r\n    this.tags = [];\r\n    this.tag = \"\";\r\n    this.httpClient.fetch('domains')\r\n      .then(response => response.json())\r\n      .then(domains => { this.domains = domains; console.log(\"Domains:\", this.domains)})\r\n      .catch(reason => { console.log(reason); });\r\n  }\r\n\r\n  postQuestion() {\r\n    var tagObjects = this.tags.map(tag => { return { text: tag }; })\r\n    return this.httpClient.fetch('questions', {\r\n      method: 'post',\r\n      body: json({ headline: this.headline, text: this.text, Tags: tagObjects, DomainText: this.domain.text })\r\n    })\r\n    .then(() => {\r\n      this.toastr.success('You have successfully posted your question');\r\n      this.headline = \"\";\r\n      this.text = \"\";\r\n      this.tags = [];\r\n      this.tag = \"\";\r\n      this.ea.publish('questionAdded');\r\n    })\r\n    .catch(() => this.serverError = true);\r\n  }\r\n\r\n  removeTag(tagText) {\r\n    var index = this.tags.indexOf(tagText);\r\n    if (index > -1) {\r\n        this.tags.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  addTag() {\r\n    if(this.tag) {\r\n      this.tags.push(this.tag);\r\n      this.tag = \"\";\r\n    }\r\n  }\r\n}","import { bindable, inject } from 'aurelia-framework';\r\nimport { HttpClient } from 'aurelia-fetch-client';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\n\r\n@inject(HttpClient, EventAggregator)\r\nexport class QuestionList {\r\n  @bindable source;\r\n  @bindable value;\r\n\r\n  constructor(httpClient, ea) {\r\n    this.httpClient = httpClient;\r\n    this.ea = ea;\r\n    this.pageIndexes = [];\r\n    this.questions = [];\r\n    this.questionsIsNotEmpty = false;\r\n    this.paginationLower = false;\r\n    this.paginationGreater = false;\r\n  }\r\n\r\n  attached() {\r\n    this.filterSubscriber = this.ea.subscribe('questionsFiltered', message => {\r\n      this.filter = message;\r\n      this.setRequestBase();\r\n\r\n      if(message.domain) {\r\n        this.request += `&domainFilter=${message.domain}`\r\n      }\r\n      if(message.questionText) {\r\n        this.request += `&questiontextFilter=${message.questionText}`\r\n      }\r\n      if(message.tags.length) {\r\n        message.tags.forEach(tag => {this.request+= `&tagFilter=${tag}`});\r\n      }\r\n      this.getQuestions();\r\n    });\r\n\r\n    this.questionAddedSubscriber = this.ea.subscribe('questionAdded', message => {\r\n      this.getQuestions();\r\n    });\r\n\r\n    this.questionDeletedSubscriber = this.ea.subscribe('questionDeleted', mesage => {\r\n      this.getQuestions();\r\n    });\r\n\r\n    this.setRequestBase();\r\n    this.getQuestions();\r\n  }\r\n\r\n  setRequestBase() {\r\n    this.request = '';\r\n    if(this.source === 'pinned') {\r\n      this.request = 'questions/pinned?';\r\n    } else if(this.source === 'mine') {\r\n      this.request = 'questions/mine?limit=3';\r\n    } else {\r\n      this.request = 'questions?include=Answers&include=Tags'\r\n    }\r\n\r\n    return this.request;\r\n  }\r\n\r\n  getQuestions() {\r\n    this.httpClient.fetch(this.request )\r\n      .then(response => response.json())\r\n      .then(responseObj => {\r\n        if(responseObj.count != 0) {\r\n          this.setParams(responseObj);\r\n          this.currentIndex = 0;\r\n        } else {\r\n          this.questions = [];\r\n          this.questionsIsNotEmpty = false;\r\n          this.paginationGreater = false;\r\n          this.paginationLower = false;\r\n          this.currentIndex = 0;\r\n        }\r\n    });\r\n  }\r\n\r\n  valueChanged(newValue, oldValue) {\r\n  } \r\n\r\n  setPage(index) {\r\n    this.httpClient.fetch(this.request + `&offset=${index*3}`)\r\n      .then(response => response.json())\r\n      .then(responseObj => {\r\n        this.setParams(responseObj);\r\n      });\r\n      this.currentIndex = index;\r\n  }\r\n\r\n  getPages(index) {\r\n    if(index <= 1)\r\n      return this.pageIndexes.slice(1, 4);\r\n    else if(index > 1 && (index <= (this.pageIndexes.length - 3)))\r\n      return this.pageIndexes.slice(index-1, index+2);\r\n    else if(index > 1 && (index > (this.pageIndexes.length - 3)))\r\n      return this.pageIndexes.slice(this.pageIndexes.length-4, this.pageIndexes.length-1);\r\n  }\r\n\r\n  setParams(responseObj) {\r\n    if(responseObj.count != 0) {\r\n      console.log(responseObj);\r\n      this.questions = responseObj.rows;\r\n      this.questionsIsNotEmpty = true;\r\n      var count = responseObj.count;\r\n      if(count % 3 == 0)\r\n        this.pageIndexes = Array.from(new Array(Math.floor(count / 3)), (x,i) => i);\r\n      else\r\n        this.pageIndexes = Array.from(new Array(Math.floor(count / 3) + 1), (x,i) => i);\r\n      this.paginationLower = this.questionsIsNotEmpty && (this.pageIndexes.length <= 5);\r\n      this.paginationGreater = this.questionsIsNotEmpty && (this.pageIndexes.length > 5); \r\n    } else  {\r\n      this.paginationGreater = false;\r\n      this.paginationLower = false;\r\n      this.questionsIsNotEmpty = false;\r\n      this.questions = [];\r\n      this.currentIndex = 0;\r\n    }\r\n  }\r\n\r\n  detached() {\r\n    this.filterSubscriber.dispose();\r\n    this.questionAddedSubscriber.dispose();\r\n    this.questionDeletedSubscriber.dispose();\r\n  }\r\n}\r\n\r\n","import { bindable, inject, computedFrom } from 'aurelia-framework';\r\nimport { HttpClient, json } from 'aurelia-fetch-client';\r\nimport { Auth } from '../../services/auth';\r\nimport { DialogService } from 'aurelia-dialog';\r\nimport { ConfirmationDialog } from './confirmation-dialog';\r\nimport { EditDialog } from './edit-dialog';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\n\r\nvar toastr = require('toastr');\r\n\r\n@inject(HttpClient, toastr, Auth, DialogService, EventAggregator)\r\nexport class Question {\r\n  @bindable content;\r\n\r\n  constructor(httpClient, toastr, auth, dialogService, ea) {\r\n    this.httpClient = httpClient;\r\n    this.toastr = toastr;\r\n    this.auth = auth;\r\n    this.dialogService = dialogService;\r\n    this.ea = ea;\r\n    this.userEmail = \"(unknownUser)\";\r\n  }\r\n\r\n  attached() {\r\n    this.httpClient.fetch(`pins/question/${this.content._id}`)\r\n      .then(response => response.json())\r\n      .then(pinned => { this.pinned = pinned; } )\r\n      .catch(reson => console.log(reason));\r\n\r\n    this.httpClient.fetch(`users/${this.content.createdByUserId}`)\r\n      .then(response => response.json())\r\n      .then(user => { this.userEmail = user.email; } )\r\n      .catch(reson => console.log(reason));\r\n  }\r\n\r\n  quickAnswer() {\r\n    this.httpClient.fetch('answers', { method: 'post', body: json({ text: this.answerText, QuestionId: this.content._id }) })\r\n      .then(() => {\r\n        this.answerText = \"\";\r\n        this.content.Answers.push({}); // to incrase the counter;\r\n        this.ea.publish('questionAnswered', { id: this.content._id  });\r\n        this.toastr.success('You have successfully posted your answer');\r\n      });\r\n  }\r\n\r\n  edit() {\r\n    this.dialogService.open({ viewModel: EditDialog, model: {\r\n      headline: \"Edit question\", \r\n      questionHeadline: this.content.headline,\r\n      questionText: this.content.text,\r\n      questionTags: this.content.TagQuestions.map(tag => { return tag.TagText; }),\r\n      questionDomain: this.content.DomainText\r\n    }}).then(dialogResponse => {\r\n      if(!dialogResponse.wasCancelled) {\r\n        console.log(dialogResponse.output);\r\n        this.httpClient.fetch(`questions/${this.content._id}`, { \r\n            method: 'put',\r\n            body: json({\r\n              headline: dialogResponse.output.headline,\r\n              text: dialogResponse.output.text,\r\n              domain: dialogResponse.output.domain,\r\n              tags: dialogResponse.output.tags\r\n            })\r\n          })\r\n          .then((response) => response.json())\r\n          .then((resObj) => {\r\n            if(resObj.updated) {\r\n              this.toastr.success('You have successfully edited your question');\r\n              this.content.headline = dialogResponse.output.headline;\r\n              this.content.text = dialogResponse.output.text;\r\n              this.content.TagQuestions = dialogResponse.output.tags.map(tag => { return { TagText: tag };});\r\n              this.content.DomainText = dialogResponse.output.domain;\r\n            }\r\n          });\r\n      }\r\n    });\r\n  }\r\n\r\n  delete() {\r\n    this.dialogService.open({ viewModel: ConfirmationDialog, model: { headline: \"Delete question\", message: \"Are you sure you want to delete this question?\"} })\r\n      .then(response => {\r\n        if(!response.wasCancelled) {\r\n          console.log(response);\r\n          this.httpClient.fetch(`questions/${this.content._id}`, { method: 'delete' })\r\n            .then(() => {\r\n              this.ea.publish('questionDeleted', { id: this.content._id  });\r\n              this.toastr.success('You have successfully deleted your question');\r\n              this.deleted = true;\r\n            });\r\n        }\r\n      });\r\n  }\r\n\r\n  pin() {\r\n    if(!this.pinned)\r\n      this.httpClient.fetch(`pins/question/${this.content._id}`, { method: 'post' });\r\n    if(this.pinned)\r\n      this.httpClient.fetch(`pins/question/${this.content._id}`, { method: 'delete' });\r\n    this.pinned = !this.pinned;\r\n  }\r\n\r\n  voteUp() {\r\n    this.httpClient.fetch(`questions/votes/${this.content._id}/thumbsup`, { method: 'put'})\r\n      .then(response => response.json())\r\n      .then(voteResp => {\r\n        if(voteResp.vote)\r\n          this.content.positiveVotes += 1;\r\n      });\r\n  }\r\n\r\n  voteDown() {\r\n    this.httpClient.fetch(`questions/votes/${this.content._id}/thumbsdown`, { method: 'put'})\r\n      .then(response => response.json())\r\n      .then(voteResp => {\r\n        if(voteResp.vote)\r\n          this.content.negativeVotes += 1;\r\n      });\r\n  }\r\n  \r\n  @computedFrom('auth.currentUser.userId', 'content.createdByUserId')\r\n  get authorized() {\r\n    return parseInt(this.auth.currentUser.userId) === parseInt(this.content.createdByUserId);\r\n  }\r\n\r\n  @computedFrom('auth.isLogedIn')\r\n  get authenticated() {\r\n    return this.auth.isLogedIn;\r\n  }\r\n}","import moment from 'moment';\r\n\r\nexport class DateFormatValueConverter {\r\n  toView(value) {\r\n      return moment(value).calendar();\r\n  }\r\n}"],"sourceRoot":"../src"}