{"version":3,"sources":["app.js","environment.js","main.js","dialogs/login.js","dialogs/signup.js","resources/index.js","pages/home.js","pages/question-details.js","pages/questions.js","services/auth.js","resources/elements/answer.js","resources/elements/confirmation-dialog.js","resources/elements/question-form.js","resources/elements/question-list.js","resources/elements/question.js","resources/value-converters/dates.js"],"names":["App","auth","dialogService","configureRouter","config","router","title","map","route","moduleId","nav","name","loginModal","open","viewModel","signupModal","debug","testing","configure","Promise","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","plugin","developmentLogging","configureContainer","container","start","then","setRoot","http","useStandardConfiguration","withBaseUrl","withDefaults","credentials","headers","withInterceptor","request","console","log","method","url","response","status","registerInstance","Login","httpClient","dialogController","login","email","password","close","catch","loginError","fetch","json","Signup","signup","body","navigate","globalResources","Home","canActivate","isLogedIn","QuestionDetails","ea","activate","params","routeConfig","questionPromise","id","questionDetail","questionContent","question","navModel","setTitle","headline","answerPromise","answers","all","attached","subscriber","subscribe","message","detached","dispose","Questions","Auth","sessionStorage","getItem","currentUser","userId","role","userinfo","setItem","user_id","logout","Answer","parseInt","content","createdByUserId","ConfirmationDialog","toastr","QuestionForm","tags","tag","postQuestion","tagObjects","text","Tags","success","serverError","removeTag","tagText","index","indexOf","splice","addTag","push","QuestionList","pageIndexes","questions","questionsIsNotEmpty","paginationLower","paginationGreater","middlePages","responseObj","count","rows","currentIndex","Array","from","Math","floor","x","i","length","getPages","valueChanged","newValue","oldValue","setPage","toString","slice","Question","quickAnswer","answerText","QuestionId","_id","Answers","publish","delete","model","wasCancelled","deleted","DateFormatValueConverter","toView","value","calendar"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import { Auth } from './services/auth';\r\nimport { inject } from 'aurelia-framework';\r\nimport { DialogService } from 'aurelia-dialog';\r\nimport { Login } from './dialogs/login';\r\nimport { Signup } from './dialogs/signup';\r\n\r\n\r\n@inject(Auth, DialogService)\r\nexport class App {\r\n  constructor(auth, dialogService) {\r\n    this.auth = auth;\r\n    this.dialogService = dialogService;\r\n  }\r\n\r\n  configureRouter(config, router){\r\n    config.title = 'Questionary';\r\n    config.map([\r\n      { route: '',       moduleId: 'pages/questions', title: 'Questions' },\r\n      { route: 'home',   moduleId: 'pages/home',      title: 'Home', nav: false },\r\n      { route: 'question/:id', moduleId: 'pages/question-details', name: 'question-details', title: 'Question' },\r\n    ]);\r\n    this.router = router;\r\n  }\r\n\r\n  loginModal() {\r\n    this.dialogService.open({ viewModel: Login });\r\n  }\r\n\r\n  signupModal() {\r\n    this.dialogService.open({ viewModel: Signup });\r\n  }\r\n}\r\n","export default {\r\n  debug: true,\r\n  testing: true\r\n};\r\n","import environment from './environment';\r\nimport {HttpClient} from 'aurelia-fetch-client';\r\n\r\n//Configure Bluebird Promises.\r\nPromise.config({\r\n  longStackTraces: environment.debug,\r\n  warnings: {\r\n    wForgottenReturn: false\r\n  }\r\n});\r\n\r\nexport function configure(aurelia) {\r\n  aurelia.use\r\n    .standardConfiguration()\r\n    .feature('resources')\r\n    .plugin('aurelia-dialog');\r\n\r\n  if (environment.debug) {\r\n    aurelia.use\r\n      .developmentLogging();\r\n  }\r\n\r\n  if (environment.testing) {\r\n    aurelia.use.plugin('aurelia-testing');\r\n  }\r\n\r\n  configureContainer(aurelia.container);\r\n\r\n  aurelia.start().then(() => aurelia.setRoot());\r\n}\r\n\r\nfunction configureContainer(container) {\r\n  let http = new HttpClient();\r\n  http.configure(config => {\r\n    config\r\n      .useStandardConfiguration()\r\n      .withBaseUrl('api/')\r\n      .withDefaults({\r\n        credentials: 'same-origin',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'X-Requested-With': 'Fetch'\r\n        }\r\n      });\r\n      if (environment.debug) {\r\n        config.withInterceptor({\r\n          request(request) {\r\n            console.log(`Requesting ${request.method} ${request.url}`);\r\n            return request;\r\n          },\r\n          response(response) {\r\n            console.log(`Received ${response.status} ${response.url}`);\r\n            return response;\r\n          }\r\n        });\r\n    }\r\n  });\r\n  container.registerInstance(HttpClient, http); // DI setup.\r\n}","import {inject} from 'aurelia-framework';\r\nimport {Router} from 'aurelia-router';\r\nimport {HttpClient} from 'aurelia-fetch-client';\r\nimport {Auth} from '../services/auth';\r\nimport {DialogController} from 'aurelia-dialog';\r\n\r\n@inject(Auth, Router, HttpClient, DialogController)\r\nexport class Login {\r\n  constructor(auth, router, httpClient, dialogController) {\r\n    this.auth = auth;\r\n    this.router = router;\r\n    this.httpClient = httpClient;\r\n    this.dialogController = dialogController;\r\n  }\r\n\r\n  login() {\r\n    this.auth.login(this.email, this.password)\r\n      .then(() => {\r\n        this.dialogController.close();\r\n        // this.router.navigate(\"\");\r\n      })\r\n      .catch(() => this.loginError = true)\r\n      .then(() => {\r\n        if(!this.loginError) {\r\n          this.httpClient.fetch('users/me')\r\n            .then(response => response.json());\r\n        }\r\n      });\r\n  }\r\n}","import {bindable, inject} from 'aurelia-framework';\r\nimport {HttpClient, json} from 'aurelia-fetch-client';\r\nimport {Router} from 'aurelia-router';\r\nimport {DialogController} from 'aurelia-dialog';\r\n\r\n\r\n@inject(HttpClient, Router, DialogController)\r\nexport class Signup {\r\n  constructor(httpClient, router, dialogController) {\r\n    this.httpClient = httpClient;\r\n    this.router = router;\r\n    this.dialogController = dialogController;\r\n  }\r\n\r\n  signup() {\r\n    this.httpClient.fetch('users', {\r\n      method: 'post',\r\n      body: json({ name: this.name, email: this.email, password: this.password })\r\n    }).then(() => {\r\n      this.dialogController.close();\r\n      this.router.navigate(\"\");\r\n    });\r\n  }\r\n}","export function configure(config) {\r\n  config.globalResources(['./elements/question-list',\r\n                          './elements/question-form']);\r\n}\r\n","import {Auth} from '../services/auth';\r\nimport {inject} from 'aurelia-framework';\r\n\r\n@inject(Auth)\r\nexport class Home {\r\n  constructor(auth) {\r\n    this.auth = auth;\r\n  }\r\n\r\n  canActivate() {\r\n    return this.auth.isLogedIn;\r\n  }\r\n}","import { inject } from 'aurelia-framework';\r\nimport { HttpClient, json } from 'aurelia-fetch-client';\r\nimport { Router } from 'aurelia-router';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\n\r\n@inject(HttpClient, EventAggregator)\r\nexport class QuestionDetails {\r\n  constructor(httpClient, ea) {\r\n    this.httpClient = httpClient;\r\n    this.ea = ea;\r\n  }\r\n\r\n  activate(params, routeConfig) {\r\n    this.routeConfig = routeConfig;  \r\n\r\n    var questionPromise = this.httpClient.fetch(`questions/${params.id}?include=Tags&include=Answers`)\r\n      .then(questionDetail => questionDetail.json())\r\n      .then(question => { \r\n        this.questionContent = question; \r\n        this.routeConfig.navModel.setTitle(question.headline);\r\n      });\r\n\r\n    var answerPromise = this.httpClient.fetch(`answers/question/${params.id}`)\r\n      .then(response => response.json())\r\n      .then(answers => { \r\n        this.answers = answers; \r\n      });\r\n\r\n    return Promise.all([questionPromise, answerPromise]);\r\n  }\r\n\r\n  attached() {\r\n    this.subscriber = this.ea.subscribe('questionAnswered', message => {\r\n      this.httpClient.fetch(`answers/question/${message.id}`)\r\n        .then(response => response.json())\r\n        .then(answers => { \r\n          this.answers = answers;\r\n                console.log(answers);\r\n        });    \r\n    });\r\n  }\r\n\r\n  detached() {\r\n    this.subscriber.dispose();\r\n  }\r\n}","\r\nexport class Questions {\r\n}","import {inject} from 'aurelia-framework';\r\nimport {HttpClient, json} from 'aurelia-fetch-client';\r\n\r\n@inject(HttpClient)\r\nexport class Auth {\r\n  constructor(httpClient) {\r\n    this.httpClient = httpClient;\r\n    this.isLogedIn = sessionStorage.getItem(\"logedIn\") === \"true\";\r\n    this.currentUser = { userId: sessionStorage.getItem(\"userId\"), role: sessionStorage.getItem(\"role\") }\r\n    console.log('auth constructor', this.currentUser);\r\n  }\r\n\r\n  login(email, password) {\r\n    return this.httpClient.fetch('auth/login', {\r\n      method: 'post',\r\n      body: json({ email: email, password: password })\r\n    })\r\n    .then(response => response.json())\r\n    .then(userinfo => {\r\n      console.log(userinfo);\r\n      // sessionStorage can only save strings not bools.\r\n      sessionStorage.setItem('logedIn', \"true\");\r\n      this.isLogedIn = true;\r\n      this.currentUser.userId = userinfo.user_id;\r\n      sessionStorage.setItem('userId', userinfo.user_id);\r\n      return userinfo;\r\n    });\r\n  }\r\n\r\n  logout() {\r\n    sessionStorage.setItem('logedIn', \"false\");\r\n    this.isLogedIn = false;\r\n    this.currentUser.userId = \"\";\r\n    sessionStorage.setItem('userId', \"\");\r\n    return this.httpClient.fetch('auth/logout', {\r\n      method: 'post'\r\n    });\r\n  }\r\n}","import {bindable, inject, computedFrom } from 'aurelia-framework';\r\nimport {HttpClient, json} from 'aurelia-fetch-client';\r\nimport {Auth} from '../../services/auth';\r\n\r\n@inject(HttpClient, Auth)\r\nexport class Answer {\r\n  @bindable content;\r\n\r\n  constructor(httpClient, auth) {\r\n    this.httpClient = httpClient;\r\n    this.auth = auth;\r\n  }\r\n\r\n  @computedFrom('auth.currentUser.userId', 'content.createdByUserId')\r\n  get authorized() {\r\n    return parseInt(this.auth.currentUser.userId) === parseInt(this.content.createdByUserId);\r\n  }\r\n\r\n  @computedFrom('auth.isLogedIn')\r\n  get authenticated() {\r\n    return this.auth.isLogedIn;\r\n  }\r\n}","import { inject } from 'aurelia-framework';\r\nimport { DialogController } from 'aurelia-dialog';\r\n\r\n@inject(DialogController)\r\nexport class ConfirmationDialog {\r\n  constructor(dialogController) {\r\n    this.dialogController = dialogController;\r\n  }\r\n\r\n  activate(content) {\r\n    this.message = content.message;\r\n    this.headline = content.headline;\r\n  }\r\n}","import { HttpClient, json } from 'aurelia-fetch-client';\r\nimport { inject } from 'aurelia-framework';\r\nvar toastr = require('toastr');\r\n\r\n\r\n@inject(HttpClient, toastr)\r\nexport class QuestionForm {\r\n  constructor(httpClient, toastr) {\r\n    this.httpClient = httpClient;\r\n    this.toastr = toastr;\r\n    this.tags = [];\r\n    this.tag = \"\";\r\n  }\r\n\r\n  postQuestion() {\r\n    var tagObjects = this.tags.map(tag => { return { text: tag }; })\r\n    return this.httpClient.fetch('questions', {\r\n      method: 'post',\r\n      body: json({ headline: this.headline, text: this.text, Tags: tagObjects })\r\n    })\r\n    .then(() => {\r\n      this.toastr.success('You have successfully posted your question');\r\n      this.headline = \"\";\r\n      this.text = \"\";\r\n      this.tags = [];\r\n    })\r\n    .catch(() => this.serverError = true);\r\n  }\r\n\r\n  removeTag(tagText) {\r\n    var index = this.tags.indexOf(tagText);\r\n    if (index > -1) {\r\n        this.tags.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  addTag() {\r\n    this.tags.push(this.tag);\r\n    this.tag = \"\";\r\n  }\r\n}","import {bindable, inject} from 'aurelia-framework';\r\nimport {HttpClient} from 'aurelia-fetch-client';\r\n\r\n@inject(HttpClient)\r\nexport class QuestionList {\r\n  @bindable value;\r\n\r\n  constructor(httpClient) {\r\n    this.httpClient = httpClient;\r\n    this.pageIndexes = [];\r\n    this.questions = [];\r\n    this.questionsIsNotEmpty = false;\r\n    this.paginationLower = false;\r\n    this.paginationGreater = false;\r\n    this.middlePages = [];\r\n\r\n    this.httpClient.fetch('questions?include=Answers&include=Tags&offset=0')\r\n      .then(response => response.json())\r\n      .then(responseObj => {\r\n        if(responseObj.count != 0) {\r\n          this.questions = responseObj.rows;\r\n          this.questionsIsNotEmpty = true;\r\n          this.currentIndex = 0;\r\n          var count = responseObj.count;\r\n          if(count % 3 == 0)\r\n            this.pageIndexes = Array.from(new Array(Math.floor(count/3)), (x,i) => i);\r\n          else\r\n            this.pageIndexes = Array.from(new Array(Math.floor(count/3) + 1), (x,i) => i);\r\n          this.paginationLower = this.questionsIsNotEmpty && (this.pageIndexes.length <= 5);\r\n          this.paginationGreater = this.questionsIsNotEmpty && (this.pageIndexes.length > 5);\r\n          this.middlePages = this.getPages(this.currentIndex);\r\n        }\r\n    });\r\n  }\r\n\r\n  valueChanged(newValue, oldValue) {\r\n  }\r\n\r\n  setPage(index) {\r\n     this.httpClient.fetch('questions?include=Answers&include=Tags&offset=' + (index*3).toString())\r\n      .then(response => response.json())\r\n      .then(responseObj => {\r\n        this.questions = responseObj.rows;\r\n        this.questionsIsNotEmpty = true;\r\n        var count = responseObj.count;\r\n          if(count % 3 == 0)\r\n            this.pageIndexes = Array.from(new Array(Math.floor(count/3)), (x,i) => i);\r\n          else\r\n            this.pageIndexes = Array.from(new Array(Math.floor(count/3) + 1), (x,i) => i);\r\n        this.paginationLower = this.questionsIsNotEmpty && (this.pageIndexes.length <= 5);\r\n        this.paginationGreater = this.questionsIsNotEmpty && (this.pageIndexes.length > 5);\r\n        this.middlePages = this.getPages(index);\r\n      });\r\n    this.currentIndex = index;\r\n  }\r\n\r\n  getPages(index) {\r\n    if(index <= 1)\r\n      return this.pageIndexes.slice(1,4);\r\n    else if(index > 1 && (index <= (this.pageIndexes.length - 3)))\r\n      return this.pageIndexes.slice(index-1, index+2);\r\n    else if(index > 1 && (index > (this.pageIndexes.length - 3)))\r\n      return this.pageIndexes.slice(this.pageIndexes.length - 4, this.pageIndexes.length - 1);\r\n  } \r\n}\r\n\r\n","import {bindable, inject, computedFrom } from 'aurelia-framework';\r\nimport {HttpClient, json} from 'aurelia-fetch-client';\r\nimport {Auth} from '../../services/auth';\r\nimport {DialogService} from 'aurelia-dialog';\r\nimport { ConfirmationDialog } from './confirmation-dialog';\r\nimport { EventAggregator } from 'aurelia-event-aggregator';\r\n\r\nvar toastr = require('toastr');\r\n\r\n@inject(HttpClient, toastr, Auth, DialogService, EventAggregator)\r\nexport class Question {\r\n  @bindable content;\r\n\r\n  constructor(httpClient, toastr, auth, dialogService, ea) {\r\n    this.httpClient = httpClient;\r\n    this.toastr = toastr;\r\n    this.auth = auth;\r\n    this.dialogService = dialogService;\r\n    this.ea = ea;\r\n  }\r\n\r\n  quickAnswer() {\r\n    this.httpClient.fetch('answers', { method: 'post', body: json({ text: this.answerText, QuestionId: this.content._id }) })\r\n      .then(() => {\r\n        this.answerText = \"\";\r\n        this.content.Answers.push({}); // to incrase the counter;\r\n        this.ea.publish('questionAnswered', { id: this.content._id  });\r\n        this.toastr.success('You have successfully posted your answer');\r\n      });\r\n  }\r\n\r\n  delete() {\r\n    this.dialogService.open({ viewModel: ConfirmationDialog, model: { headline: \"Delete question\", message: \"Are you sure you want to delete this question?\"} })\r\n      .then(response => {\r\n        if(!response.wasCancelled) {\r\n          console.log(response);\r\n          this.httpClient.fetch(`questions/${this.content._id}`, { method: 'delete' })\r\n            .then(() => {\r\n              this.toastr.success('You have successfully deleted your question');\r\n              this.deleted = true;\r\n            });\r\n        }\r\n      });\r\n  }\r\n  \r\n  @computedFrom('auth.currentUser.userId', 'content.createdByUserId')\r\n  get authorized() {\r\n    return parseInt(this.auth.currentUser.userId) === parseInt(this.content.createdByUserId);\r\n  }\r\n\r\n  @computedFrom('auth.isLogedIn')\r\n  get authenticated() {\r\n    return this.auth.isLogedIn;\r\n  }\r\n}","import moment from 'moment';\r\n\r\nexport class DateFormatValueConverter {\r\n  toView(value) {\r\n      return moment(value).calendar();\r\n  }\r\n}"],"sourceRoot":"../src"}