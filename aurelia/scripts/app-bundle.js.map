{"version":3,"sources":["app.js","environment.js","main.js","config/sharedResources.js","pages/home.js","pages/login.js","pages/logout.js","pages/questions.js","pages/signup.js","resources/index.js","services/auth.js","resources/elements/question-form.js","resources/elements/question-list.js"],"names":["App","auth","configureRouter","config","router","title","map","route","moduleId","nav","name","debug","testing","configure","Promise","longStackTraces","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","configureContainer","container","start","then","setRoot","http","useStandardConfiguration","withBaseUrl","withDefaults","credentials","headers","withInterceptor","request","console","log","method","url","response","status","registerInstance","SharedResources","currentUser","isLogedIn","isAdmin","id","email","currentIndex","Home","sharedResources","canActivate","Login","httpClient","login","password","navigate","catch","loginError","fetch","json","user","role","_id","Logout","logout","Questions","message","Signup","signup","body","globalResources","Auth","sessionStorage","getItem","setItem","toastr","QuestionForm","postQuestion","headline","text","success","serverError","QuestionList","qss","pageIndexes","qssIsNotEmpty","questions","length","push","splice","Array","from","x","i","valueChanged","newValue","oldValue","setPage","index"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {Auth} from './services/auth';\r\nimport {inject} from 'aurelia-framework';\r\n\r\n@inject(Auth)\r\nexport class App {\r\n  constructor(auth) {\r\n    this.auth = auth;\r\n  }\r\n\r\n  configureRouter(config, router){\r\n    config.title = 'Questionary';\r\n    config.map([\r\n      { route: '',              moduleId: 'pages/questions',   title: 'Questions' },\r\n      { route: 'home',              moduleId: 'pages/home',   title: 'Home', nav: false },\r\n      { route: 'login',  moduleId: 'pages/login', name: 'login', title: 'Log in' },\r\n      { route: 'logout',  moduleId: 'pages/logout', name: 'logout', title: 'Log out' },\r\n      { route: 'signup', moduleId: 'pages/signup', name: 'signup', title: 'Sign up' }\r\n    ]);\r\n    this.router = router;\r\n  }\r\n}\r\n","export default {\r\n  debug: true,\r\n  testing: true\r\n};\r\n","import environment from './environment';\r\nimport {HttpClient} from 'aurelia-fetch-client';\r\n\r\n//Configure Bluebird Promises.\r\nPromise.config({\r\n  longStackTraces: environment.debug,\r\n  warnings: {\r\n    wForgottenReturn: false\r\n  }\r\n});\r\n\r\nexport function configure(aurelia) {\r\n  aurelia.use\r\n    .standardConfiguration()\r\n    .feature('resources');\r\n\r\n  if (environment.debug) {\r\n    aurelia.use.developmentLogging();\r\n  }\r\n\r\n  if (environment.testing) {\r\n    aurelia.use.plugin('aurelia-testing');\r\n  }\r\n\r\n  configureContainer(aurelia.container);\r\n\r\n  aurelia.start().then(() => aurelia.setRoot());\r\n}\r\n\r\nfunction configureContainer(container) {\r\n  let http = new HttpClient();\r\n  http.configure(config => {\r\n    config\r\n      .useStandardConfiguration()\r\n      .withBaseUrl('api/')\r\n      .withDefaults({\r\n        credentials: 'same-origin',\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'X-Requested-With': 'Fetch'\r\n        }\r\n      });\r\n      if (environment.debug) {\r\n        config.withInterceptor({\r\n          request(request) {\r\n            console.log(`Requesting ${request.method} ${request.url}`);\r\n            return request;\r\n          },\r\n          response(response) {\r\n            console.log(`Received ${response.status} ${response.url}`);\r\n            return response;\r\n          }\r\n        });\r\n    }\r\n  });\r\n  container.registerInstance(HttpClient, http); // DI setup.\r\n}","export class SharedResources {\r\n  constructor() {\r\n    this.currentUser = {\r\n      isLogedIn: false,\r\n      isAdmin: false,\r\n      id: -1,\r\n      name: \"\",\r\n      email: \"\"\r\n    };\r\n    this.currentIndex = -1;\r\n  }\r\n}","import {Auth} from '../services/auth';\r\nimport {inject} from 'aurelia-framework';\r\nimport {SharedResources} from '../config/sharedResources';\r\n\r\n@inject(Auth, SharedResources)\r\nexport class Home {\r\n  constructor(auth, sharedResources) {\r\n    this.auth = auth;\r\n    this.sharedResources = sharedResources;\r\n  }\r\n\r\n  canActivate() {\r\n    return this.auth.isLogedIn;\r\n  }\r\n}","import {inject} from 'aurelia-framework';\r\nimport {Router} from 'aurelia-router';\r\nimport {HttpClient} from 'aurelia-fetch-client';\r\nimport {SharedResources} from '../config/sharedResources';\r\nimport {Auth} from '../services/auth';\r\n\r\n@inject(Auth, Router, HttpClient, SharedResources)\r\nexport class Login {\r\n  constructor(auth, router, httpClient, sharedResources) {\r\n    this.auth = auth;\r\n    this.router = router;\r\n    this.httpClient = httpClient;\r\n    this.sharedResources = sharedResources;\r\n  }\r\n\r\n  login() {\r\n    this.auth.login(this.email, this.password)\r\n      .then(() => {\r\n        this.router.navigate(\"\");\r\n      })\r\n      .catch(() => this.loginError = true)\r\n      .then(() => {\r\n        if(!this.loginError) {\r\n          this.httpClient.fetch('users/me')\r\n            .then(response => response.json())\r\n            .then(user => {\r\n              this.sharedResources.isLogedIn = true;\r\n              this.sharedResources.isAdmin = user.role == \"admin\";\r\n              this.sharedResources.id = user._id;\r\n              this.sharedResources.name = user.name;\r\n              this.sharedResources.email = user.email;\r\n            });\r\n        } \r\n      });\r\n  }\r\n}","import {inject} from 'aurelia-framework';\r\nimport {Router} from 'aurelia-router';\r\nimport {SharedResources} from '../config/sharedResources';\r\nimport {Auth} from '../services/auth';\r\n\r\n@inject(Router, Auth, SharedResources)\r\nexport class Logout {\r\n  constructor(router, auth, sharedResources) {\r\n    this.auth = auth;\r\n    this.router = router;\r\n    this.sharedResources = sharedResources;\r\n\r\n    this.auth.logout()\r\n      .then(() => { \r\n        this.router.navigate(\"\");\r\n        this.sharedResources.isLogedIn = false;\r\n        this.sharedResources.isAdmin = false;\r\n        this.sharedResources.id = -1;\r\n        this.sharedResources.name = \"\";\r\n        this.sharedResources.email = \"\";\r\n        this.sharedResources.role = \"\";\r\n      });\r\n  }\r\n}","import {inject} from 'aurelia-framework';\r\nimport {SharedResources} from '../config/sharedResources';\r\n\r\n@inject(SharedResources)\r\nexport class Questions {\r\n  constructor(sharedResources) {\r\n    this.message = \"hello\";\r\n    this.sharedResources = sharedResources;\r\n  }\r\n}","import {bindable, inject} from 'aurelia-framework';\r\nimport {HttpClient, json} from 'aurelia-fetch-client';\r\nimport {Router} from 'aurelia-router';\r\n\r\n@inject(HttpClient, Router)\r\nexport class Signup {\r\n  constructor(httpClient, router) {\r\n    this.httpClient = httpClient;\r\n    this.router = router;\r\n  }\r\n\r\n  signup() {\r\n    this.httpClient.fetch('users', {\r\n      method: 'post',\r\n      body: json({ name: this.name, email: this.email, password: this.password })\r\n    }).then(() => this.router.navigate(\"\"));\r\n  }\r\n}","export function configure(config) {\r\n  config.globalResources(['./elements/question-list',\r\n          './elements/question-form']);\r\n}\r\n","import {inject} from 'aurelia-framework';\r\nimport {HttpClient, json} from 'aurelia-fetch-client';\r\n\r\n@inject(HttpClient)\r\nexport class Auth {\r\n  constructor(httpClient) {\r\n    this.httpClient = httpClient;\r\n    this.isLogedIn = sessionStorage.getItem(\"logedIn\") === \"true\" ? true : false;\r\n  }\r\n\r\n  login(email, password) {\r\n    return this.httpClient.fetch('auth/login', {\r\n      method: 'post',\r\n      body: json({ email: email, password: password })\r\n    })\r\n    .then(response => {\r\n      // sessionStorage can only save strings not bools.\r\n      sessionStorage.setItem('logedIn', \"true\");\r\n      this.isLogedIn = true;\r\n      return response.json();\r\n    });\r\n  }\r\n\r\n  logout() {\r\n    return this.httpClient.fetch('auth/logout', {\r\n      method: 'post'\r\n    })\r\n    .then(response => { \r\n      sessionStorage.setItem('logedIn', \"false\");\r\n      this.isLogedIn = false;\r\n    });\r\n  }\r\n}","import {HttpClient, json} from 'aurelia-fetch-client';\r\nimport {inject} from 'aurelia-framework';\r\nimport {Router} from 'aurelia-router';\r\nvar toastr = require('toastr');\r\n\r\n\r\n@inject(HttpClient, Router, toastr)\r\nexport class QuestionForm {\r\n  constructor(httpClient, router, toastr) {\r\n    this.httpClient = httpClient;\r\n    this.router = router;\r\n    this.toastr = toastr;\r\n  }\r\n\r\n  postQuestion() {\r\n    return this.httpClient.fetch('questions', {\r\n      method: 'post',\r\n      body: json({ headline: this.headline, text: this.text })\r\n    })\r\n    .then(() => {\r\n      // todo: add toster!\r\n      this.toastr.success('You have successfully posted your question');\r\n      this.router.navigate(\"\");\r\n    })\r\n    .catch(() => this.serverError = true);\r\n  }\r\n}","import {bindable, inject} from 'aurelia-framework';\r\nimport {HttpClient} from 'aurelia-fetch-client';\r\nimport {SharedResources} from '../../config/sharedResources';\r\n\r\n@inject(HttpClient, SharedResources)\r\nexport class QuestionList {\r\n  @bindable value;\r\n\r\n  constructor(httpClient, sharedResources) {\r\n    this.httpClient = httpClient;\r\n    this.sharedResources = sharedResources;\r\n    this.qss = [];\r\n    this.pageIndexes = [];\r\n    sharedResources.currentIndex = -1;\r\n    this.qssIsNotEmpty = false;\r\n\r\n    this.httpClient.fetch('questions')\r\n      .then(response => response.json())\r\n      .then(questions => {\r\n        this.questions = questions;\r\n        while(this.questions.length != 0)\r\n          this.qss.push(this.questions.splice(0,6));\r\n        this.qssIsNotEmpty = this.qss.length != 0;\r\n        if(this.qssIsNotEmpty) {\r\n          this.questions = this.qss[0];\r\n          this.currentIndex = 0;\r\n          this.pageIndexes = Array.from(new Array(this.qss.length), (x,i) => i);\r\n        }\r\n    });\r\n  }\r\n\r\n  valueChanged(newValue, oldValue) {\r\n    this.questions = this.qss[newValue];\r\n  }\r\n\r\n  setPage(index) {\r\n    this.currentIndex = index;\r\n  }\r\n}\r\n\r\n"],"sourceRoot":"../src"}